<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Pages</title>
</head>

<body>
    <input type="text" id="actressName" placeholder="Nháº­p tÃªn ná»¯ diá»…n viÃªn">
    <button id="saveButton">LÆ°u</button>
    <input type="text" id="weburl" placeholder="Nháº­p Ä‘Æ°á»ng dáº«n báº¡n mong muá»‘n" value="https://javtiful.com/actress/">
    <button id="openPagesButton">Má»Ÿ trang tá»•ng</button>
    <button id="openPagesButton1">Má»Ÿ trang1</button>

    <button id="openPagesButton2">Má»Ÿ trang2</button>

    <button id="openPagesButton3">Má»Ÿ trang3</button>




    <div id="actressList"></div> <!-- ThÃªm má»™t pháº§n tá»­ Ä‘á»ƒ chá»©a danh sÃ¡ch ná»¯ diá»…n viÃªn -->

    <script>
        // Láº¯ng nghe sá»± kiá»‡n click trÃªn nÃºt "LÆ°u"
        document.getElementById("saveButton").addEventListener("click", function () {
            var actressName = document.getElementById("actressName").value;
            saveToApi(actressName);
        });

        // HÃ m Ä‘á»ƒ lÆ°u dá»¯ liá»‡u lÃªn API
        function saveToApi(name) {
            fetch("https://62fbae6be4bcaf53518af2ed.mockapi.io/api/actress", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    name: name
                })
            })
                .then(response => response.json())
                .then(data => {
                    console.log("Dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c lÆ°u lÃªn API:", data);
                    location.reload(); // Reload láº¡i trang sau khi lÆ°u dá»¯ liá»‡u
                })
                .catch(error => console.error("Lá»—i khi lÆ°u dá»¯ liá»‡u:", error));
        }


        function deleteActress(id) {
            fetch(`https://62fbae6be4bcaf53518af2ed.mockapi.io/api/actress/${id}`, {
                method: 'DELETE',
            })
                .then(response => response.json())
                .then(data => console.log("ÄÃ£ xÃ³a:", data))
                .catch(error => console.error("Lá»—i khi xÃ³a:", error));
        }

        // Láº¯ng nghe sá»± kiá»‡n khi tÃ i liá»‡u Ä‘Ã£ Ä‘Æ°á»£c táº£i
        document.addEventListener("DOMContentLoaded", function () {
            // Láº¥y dá»¯ liá»‡u tá»« API vÃ  hiá»ƒn thá»‹ tÃªn ná»¯ diá»…n viÃªn
            fetch("https://62fbae6be4bcaf53518af2ed.mockapi.io/api/actress")
                .then(response => response.json())
                .then(data => {
                    var actressList = document.getElementById("actressList");
                    data.forEach((actress, index) => { // ThÃªm index vÃ o forEach
                        var listItem = document.createElement('div');
                        var actressIndex = index + 1; // Chá»‰ sá»‘ báº¯t Ä‘áº§u tá»« 1
                        listItem.textContent = actressIndex + ". " + actress.name; // Hiá»ƒn thá»‹ chá»‰ sá»‘ vÃ  tÃªn ná»¯ diá»…n viÃªn
                        var deleteButton = document.createElement('button');
                        var searchValue = document.createElement('button');
                        searchValue.textContent = "search";

                        deleteButton.textContent = "XÃ³a";
                        deleteButton.addEventListener('click', function () {
                            deleteActress(actress.id);
                            listItem.remove(); // XÃ³a pháº§n tá»­ div hiá»‡n táº¡i khi nháº¥n nÃºt xÃ³a
                        });
                        searchValue.addEventListener('click', function () {
                            var url = document.getElementById("weburl").value;

                            console.log('1111111111111')
                            console.log('actress.name:', actress.name);
                            var actressName = actress.name.replace(/\s+/g, '-');
                            console.log("ðŸš€ ~ url:", url)
                            openPage(url + actressName)
                        })
                        listItem.appendChild(deleteButton);
                        listItem.appendChild(searchValue);
                        actressList.appendChild(listItem);
                    });
                    console.log('Math.ceil(data.length / 3):', Math.ceil(data.length / 3));
                    console.log('Math.ceil(data.length / 1.5):', Math.ceil(data.length / 1.5));
                    document.getElementById("openPagesButton1").addEventListener("click", function () {
                        openPages(1, Math.ceil(data.length / 3)); // Má»Ÿ trang tá»« 1 Ä‘áº¿n 17
                    });

                    // Láº¯ng nghe sá»± kiá»‡n click trÃªn nÃºt "Má»Ÿ trang 2"
                    document.getElementById("openPagesButton2").addEventListener("click", function () {
                        openPages(Math.ceil(data.length / 3) + 1, Math.ceil(data.length / 1.5)); // Má»Ÿ trang tá»« 18 Ä‘áº¿n 34
                    });

                    // Láº¯ng nghe sá»± kiá»‡n click trÃªn nÃºt "Má»Ÿ trang 3"
                    document.getElementById("openPagesButton3").addEventListener("click", function () {
                        openPages(Math.ceil(data.length / 1.5) + 1, data.length); // Má»Ÿ trang tá»« 35 Ä‘áº¿n 51
                    });
                    document.getElementById("openPagesButton").addEventListener("click", function () {
                        openPages(1, data.length); // Má»Ÿ trang tá»« 35 Ä‘áº¿n 51
                    });
                    function openPages(startIndex, endIndex) {
                        console.log(`dá»¯ liá»‡u tá»« ${startIndex} Ä‘áº¿n ${endIndex}   `)
                        console.log("ðŸš€ ~ openPages ~ startIndex:", startIndex)
                        console.log("ðŸš€ ~ openPages ~ endIndex:", endIndex)

                        var url = document.getElementById("weburl").value;
                        fetch("https://62fbae6be4bcaf53518af2ed.mockapi.io/api/actress")
                            .then(response => response.json())
                            .then(data => {
                                data.slice(startIndex - 1, endIndex).forEach(actress => {
                                    var actressName = actress.name.replace(/\s+/g, '-');
                                    console.log("ðŸš€ ~ data.slice ~ actressName:", actressName)
                                    openPage(url + actressName);
                                });
                            })
                            .catch(error => console.error("Lá»—i khi láº¥y dá»¯ liá»‡u tá»« API:", error));
                    }

                    // HÃ m Ä‘á»ƒ má»Ÿ má»™t trang web má»›i
                    function openPage(url) {
                        window.open(url, "_blank"); // Má»Ÿ trang web trong cá»­a sá»• má»›i
                    }

                })
                .catch(error => console.error("Lá»—i khi láº¥y dá»¯ liá»‡u tá»« API:", error));
        }
        );
    </script>

</body>

</html>